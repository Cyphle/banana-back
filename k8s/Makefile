.PHONY: sync-keycloak-config deploy-keycloak deploy-all clean

# Synchronise la config Keycloak depuis le fichier source
sync-keycloak-config:
	@echo "ðŸ”„ Synchronisation de la configuration Keycloak..."
	cd keycloak && ./generate-keycloak-config.sh

# DÃ©ploie Keycloak avec la config Ã  jour
deploy-keycloak: sync-keycloak-config
	@echo "ðŸš€ DÃ©ploiement de Keycloak..."
	kubectl apply -f keycloak/

# DÃ©ploie tous les services
deploy-all:
	@echo "ðŸš€ DÃ©ploiement de tous les services..."
	kubectl apply -R -f .

# Nettoie les ressources
clean:
	@echo "ðŸ§¹ Nettoyage des ressources..."
	kubectl delete -R -f . --ignore-not-found=true

# Aide
help:
	@echo "Commandes disponibles:"
	@echo "  sync-keycloak-config  - Synchronise la config Keycloak"
	@echo "  deploy-keycloak       - DÃ©ploie Keycloak avec config Ã  jour"
	@echo "  deploy-all           - DÃ©ploie tous les services"
	@echo "  clean                - Supprime toutes les ressources"